<section id="section" class="container-fluid py-5">
  <h1 class="text-center fw-bold mb-5" style="color: #154580">
    {{ estaEditando ? "Editar Pensamento" : "Adicionar Novo Pensamento" }}
  </h1>

  <div class="mx-auto p-4 mb-5 bg-info-subtle" style="max-width: 800px">
    <form [formGroup]="formulario" (ngSubmit)="onSubmit()">
      <div class="mb-3">
        <label
          for="pensamento"
          class="form-label fw-bold"
          style="color: #154580"
        >
          Pensamento
        </label>
        <textarea
          class="form-control"
          [ngClass]="{
            'is-invalid': f['pensamento'].touched && f['pensamento'].invalid
          }"
          maxlength="300"
          id="pensamento"
          rows="3"
          formControlName="pensamento"
          placeholder="Adicione um pensamento"
        ></textarea>

        @if(f['pensamento'].touched && f['pensamento'].invalid){
        <div class="invalid-feedback">
          @if (f['pensamento'].errors?.['required']) {
          <span>O pensamento é obrigatório.</span>
          } @if (f['pensamento'].errors?.['maxlength']) {
          <span>O pensamento não pode exceder 300 caracteres.</span>
          }
        </div>
        }
      </div>

      <div class="mb-4">
        <label for="autor" class="form-label fw-bold" style="color: #154580">
          Autor(a)/Fonte
        </label>
        <input
          type="text"
          maxlength="50"
          class="form-control"
          id="autor"
          [ngClass]="{'is-invalid': f['autor'].touched && f['autor'].invalid}"
          formControlName="autor"
          placeholder="Insira um autor ou autora "
          name="autor"
        />
        @if (f['autor'].touched && f['autor'].invalid) {
          <div class="invalid-feedback">
            @if (f['autor'].errors?.['required']) {
              <span>O autor é obrigatório.</span>
            }
            @if (f['autor'].errors?.['maxlength']) {
              <span>O autor não pode exceder 50 caracteres.</span>
            }
          </div>
        }
      </div>

      <div class="mb-5">
        <label class="form-label mb-3 fw-bold">
          Selecione o modelo do Card:
        </label>
        <div class="row g-3">
          <div class="col-12 col-md-4">
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="modelo"
                id="modelo1"
                value="1"
                formControlName="modelo"
                checked
              />
              <label class="form-check-label" for="modelo1">Modelo 1</label>
            </div>
          </div>
          <div class="col-12 col-md-4">
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="modelo"
                id="modelo2"
                value="2"
                formControlName="modelo"
              />
              <label class="form-check-label" for="modelo2">Modelo 2</label>
            </div>
          </div>
          <div class="col-12 col-md-4">
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="modelo"
                id="modelo3"
                value="3"
                formControlName="modelo"
              />
              <label class="form-check-label" for="modelo3">Modelo 3</label>
            </div>
          </div>
        </div>
        
      </div>
      

      <div class="row g-3 mb-5">
        <div class="col-12 col-md-4">
          <div class="card card-azul h-100">
            <div class="card-body">
              <h3 class="card-title">Pré-visualização</h3>
              <p class="card-text">
                {{
                  formulario.value.pensamento || "Lorem ipsum dolor sit amet..."
                }}
              </p>
              <p class="card-text fw-bold">
                {{ formulario.value.autor || "Autora da Silva Sauro" }}
              </p>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="card card-claro h-100">
            <div class="card-body">
              <h3 class="card-title">Pré-visualização</h3>
              <p class="card-text">
                {{
                  formulario.value.pensamento || "Lorem ipsum dolor sit amet..."
                }}
              </p>
              <p class="card-text fw-bold">
                {{ formulario.value.autor || "Autora da Silva Sauro" }}
              </p>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="card card-verde h-100">
            <div class="card-body">
              <h3 class="card-title">Pré-visualização</h3>
              <p class="card-text">
                {{
                  formulario.value.pensamento || "Lorem ipsum dolor sit amet..."
                }}
              </p>
              <p class="card-text fw-bold">
                {{ formulario.value.autor || "Autora da Silva Sauro" }}
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-center gap-3">
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="formulario.invalid"
        >
          {{ pensamentoParaEditar ? "Atualizar" : "Salvar" }}
        </button>
        <button type="button" class="btn btn-secondary" (click)="cancelar()">
          Cancelar
        </button>
        <button
          type="button"
          class="btn btn-outline-secondary"
          (click)="voltarParaMural()"
        >
          Voltar para Mural
        </button>
      </div>
    </form>
  </div>
</section>
